---
title: GDB 调试
date: 2020-07-22
tags: [Linux,gdb]
---

本篇博文记录一些GDB的基本使用方法

<!--more-->

在使用GDB调试前，首先要生成可执行程序

```bash
gcc *.c -o app -g
```

使用`-g`参数，使生成的可执行程序中包含调试信息

然后使用`dgb app`进入调试截面

# 1. 打断点

- 查看程序源代码

  ```bash
  l
  ```

  上面的代码查看带`main`函数的文件

  ```bash 
  l a.c:20
  ```

  上面的代码查看`a.c`函数的第20行内容，行号也可以换成函数名称

  继续使用`l`就能继续往下看

- 断点

  使用`break n`在第n行设置断点，这个`break`可以简写成`b`

- 带有条件的断点

  比如在循环里面，不希望每次都断点

  ```bash
  b 22 if i==10
  ```

  在`i==10`时，才会有这个断点

- 使用`info b`查看断点信息，`info`可以简写为`i`

- `d 编号`删除断点

# 2. 执行

- `start`执行一步
- `n`单步执行
- `s`单步进入
- `c`继续执行
- `p i`查看`i`的值
- `ptype i`查看`i`类型
- `display i` 追踪变量`i`的值，使用`undisplay 编号` 不追踪，编号使用`info display`查看
- 进入循环，使用`u`跳出单次循环 
- `finish`跳出函数
- `set var i=10`将`i`设置成10