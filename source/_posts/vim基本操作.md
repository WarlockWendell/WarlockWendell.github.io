---
title: vim基本操作
date: 2019-9-13 20:44:16
tags: [Linux,vim]
---

vim的操作指令比较麻烦，但是熟练掌握了vim的使用方法后可以带来比较高的开发效率，所以在此篇博客上记录一些vim的使用方法。

<!--more-->

## 1. vim的操作模式

### 1.1 命令模式

打开vim时就处于命令模式，在此模式下输入`:` 进入最后一行模式；输入`i` 或者`a` 进入插入模式

在命令模式下可以输入指令来完成文本的编辑

### 1.2 插入模式

在插入模式下可以进行文本的输入和删除，就像Windows中打开记事本的模式一样

### 1.3 最后一行模式

在此模式下，可以输入命令来完成文本的编辑

 

> 其实，主要模式大体分成两类，一类是输入文本的模式，就是插入模式，另一类是输入命令完成编辑的模式，就是命令模式和最后一行模式

---

## 2. vim的基本操作

### 2.1 打开文件

***vim file*** 

使用这个命令可以打开一个二进制文本文件，如果这个文件不存在，则会新建一个文本文件

如果使用 `vim file +n` 则打开一个文件，并将光标定位到第n行的行首

### 2.2 保存文件

保存文件在最后一行模式下，输入`:wq` 可以保存退出，输入`:q` 为退出，输入`:w` 为保存，输入时加上`!` 为强制执行该操作，输入`! commmand` 为暂时离开vim去终端执行命令，`:w filename` 保存到指定文件

---

## 3. vim的实用命令

### 3.1 插入模式

- `a`：在光标右边插入文字
- `i`：在光标位置插入文字
- `o`：在光标下新建一行
- `O`：在光标上新建一行
- `I`：在光标所在行的行首插入文字
- `A`：在光标所在行的行尾插入文字

### 3.2 删除、修改功能

- `[n]x`：删除光标后n个字符
- `[n]x`：删除光标前的n个字符
- `D`：删除光标开始到行尾的字符
- `[n]dd`：剪切从当前行开始的n行
- `[n]yy`：复制从当前行开始的n行
- `p`：将剪贴板上的内容粘贴
- `dG`：删除光标所在开始到文件尾的所有字符
- `J`：合并两行
- `.`：执行上一个操作
- `u`：撤销前一个命令
- `ctrl` `+` `r` ：反撤销

### 3.3 行定位功能

- `ctrl + f`：向前滚动一个屏幕
- `ctrl + b`：向后滚动一个屏幕
- `gg`：到文件第一行行首
- `G`：到文件最后一行行首
- `:$`：到文件最后一行行尾
- `nG` 或者`ngg`：到指定行
- `/内容`：查找指定内容
- `h j k l` 移动
- `0` 移动到行首
- `$` 移动到行尾

### 3.4 文本查找功能

- `/字符串`：查找指定字符串

- `n`：查找下一个

- `N`：查找上一个

- `?字符串`：向上找一个

- `/^字符串`：查找以字符串开头的行

- `/字符串$`：查找以字符串结尾的行

- 光标移到单词下，使用`#`查找

- 光标移到单词下，使用`K`可以自动跳到man文档，不过这样跳到的是第一章

  > 可以先指定章节，再使用`K`

### 3.5 文本替换功能

- `r`：替换当前字符
- `:r filename `：在光标处插入另外一个文件
- `:s/p1/p2/g`：将当前行的p1用p2替换
- `:%s/p1/p2/g`：将文件中所有的p1都用p2替换
- `:n1,n2s/p1/p2/g`：将从n1行到n2行的所有p1用p2替换

### 3.6 可视模式

- 使用`v` 切换到可视模式下
- 使用`hjkl`移动光标选择文字
- 使用 `d` 剪切，`y` 复制， `p` / `P` 粘贴

### 3.7 缩进

- `>>` : 右缩进
- `<<` : 左缩进  

### 3.8 分屏

- `:sp` : 水平分屏
-  `:vsp`：垂直分屏
- 可以在命令后面加上文件名，可以分屏打开另外一个文件
- `ctrl` `+` `ww` : 切换屏幕
- `:wqa` ：退出所有的窗口

## 4. 配置文件

- 系统所有用户的配置文件：`/etc/vim/.vimrc`
- 用户级别的配置文件 ：`~/vim/.vimrc`